<div>

  <h1>
    <b>{{ ctrl.feature.info.keyword }}</b>
    {{ ctrl.feature.info.name }}
    <tc-tags tags="ctrl.feature.tags"></tc-tags>
  </h1>

  <p>
    Runned in:
    <a ng-href="#/test-runs/{{ ctrl.feature.testRun.id }}">test run @ {{ ctrl.feature.testRun.date | date:'yyyy-MM-dd
      HH:mm' }}</a>
    <span class="label label-default">{{ ctrl.feature.testRun.env }}</span>
  </p>

  <p>{{ ctrl.feature.description }}</p>

  <hr>

  <div ng-repeat="scenario in ctrl.feature.scenarii">

    <h2>
      <tc-element-info info="scenario.info"></tc-element-info>
      <tc-status status="scenario.status"></tc-status>
      <tc-tags tags="scenario.tags"></tc-tags>
    </h2>

    <div ng-repeat="action in scenario.beforeActions">
      <p>
        <i><b>Pr√©-action</b> #{{ $index + 1 }}</i>
        <tc-status status="action.status"></tc-status>
      </p>
      <pre ng-if="action.errorMessage">{{ action.errorMessage }}</pre>
    </div>

    <div ng-if="scenario.background" ng-repeat="step in scenario.background.steps">

      <p>
        <i>
          <tc-element-info info="step.info"></tc-element-info>
        </i>
        <tc-status status="step.status"></tc-status>
      </p>

      <pre ng-if="step.errorMessage">{{ step.errorMessage }}</pre>

    </div>

    <div ng-repeat="step in scenario.steps">

      <p>
        <tc-element-info info="step.info"></tc-element-info>
        <tc-status status="step.status"></tc-status>
      </p>

      <table ng-if="step.table" class="table table-hover table-condensed" style="table-layout: auto">
        <tbody>
        <tr ng-repeat="row in step.table">
          <td ng-repeat="cell in row"><code>{{ cell }}</code></td>
        </tr>
        </tbody>
      </table>

      <pre ng-if="step.errorMessage">{{ step.errorMessage }}</pre>

    </div>

    <div ng-repeat="action in scenario.afterActions">
      <p>
        <i><b>Post-action</b> #{{ scenario.afterActions.length - $index }}</i>
        <tc-status status="action.status"></tc-status>
      </p>
      <pre ng-if="action.errorMessage">{{ action.errorMessage }}</pre>
    </div>

  </div>

</div>

