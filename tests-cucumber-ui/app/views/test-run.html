<div>

  <ol class="breadcrumb">
    <li>Environnement {{ ctrl.testRun.env }}</li>
    <li class="active">Tir du {{ ctrl.testRun.date | date:'dd/MM/yyyy à HH:mm' }}</li>
  </ol>

  <h1>Tir du {{ ctrl.testRun.date | date:'dd/MM/yyyy à HH:mm' }}</h1>

  <hr>

  <div class="btn-toolbar" role="toolbar">
    <div class="btn-group" role="group">

      <button ng-click="ctrl.openImportForm()" class="btn btn-primary btn-default">
        <span class="glyphicon glyphicon-import" aria-hidden="true"></span>
        Importer un résultat de tests Cucumber
      </button>

    </div>
    <div class="btn-group" role="group">

      <button ng-click="ctrl.delete()" class="btn btn-danger btn-default">
        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
        Supprimer
      </button>

    </div>
  </div>

  <hr>

  <table class="table table-striped table-bordered">
    <thead>
    <tr>
      <th>Fonctionnalité</th>
      <th>Tags</th>
      <th>Nombre de scénarii</th>
      <th>Succès</th>
      <th>Echecs</th>
      <th>En attente</th>
      <th>Non joués</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="feature in ctrl.testRun.features">
      <td>
        <a ng-href="#/features/{{ feature.id }}">
          {{ feature.info.name }}
        </a>
      </td>
      <td>
        <tc-tags tags="feature.tags"></tc-tags>
      </td>
      <td><span class="badge">{{ feature.stats.scenarioCount }}</span></td>
      <td><span class="badge">{{ feature.stats.statsByStatus['PASSED'] }}</span></td>
      <td><span class="badge">{{ feature.stats.statsByStatus['FAILED'] }}</span></td>
      <td><span class="badge">{{ feature.stats.statsByStatus['PENDING'] }}</span></td>
      <td><span class="badge">{{ feature.stats.statsByStatus['NOT_RUN'] }}</span></td>
    </tr>
    </tbody>
  </table>

  <!-- Import cucumber results modal window -->
  <script type="text/ng-template" id="importCucumberResults.html">
    <div class="modal-header">
      <button type="button" class="close" ng-click="$dismiss()" aria-label="Fermer">
        <span aria-hidden="true">&times;</span>
      </button>
      <h4 class="modal-title">Importer un résultat de tests Cucumber</h4>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="file">Fichier à importer</label>
        <input type="file" id="file" ng-model="importCtrl.file" ngf-select ngf-pattern="'.json'">
        <p class="help-block">Importez un fichier généré par le runner Cucumber</p>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" id="dryRun" ng-model="importCtrl.dryRun"> Tir à blanc
        </label>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" ng-click="$dismiss()">Annuler</button>
      <button type="button" class="btn btn-primary" ng-click="importCtrl.import()">Importer</button>
    </div>
  </script>

</div>
